<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBLD Scramble Finder</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-body-secondary">
    <nav class="navbar navbar-expand-lg bg-body-tertiary shadow-sm">
        <div class="container py-2">
            <span class="navbar-brand fw-semibold mb-0 h1">MBLD Scramble Finder</span>
            <div class="d-flex align-items-center gap-3 ms-auto">
                <a class="btn btn-bar d-flex align-items-center gap-2" href="https://github.com/namisama269/scramble-finder" target="_blank" rel="noopener" aria-label="View on GitHub">
                    <i class="bi bi-github"></i>
                    <span>GitHub</span>
                </a>
                <button type="button" class="btn btn-bar" id="howToBtn">
                    How to use
                </button>
                <div class="form-check form-switch m-0">
                    <input class="form-check-input" type="checkbox" role="switch" id="themeToggle">
                    <label class="form-check-label" for="themeToggle">Dark mode</label>
                </div>
            </div>
        </div>
    </nav>

    <main class="container my-4">
        <div class="row g-4">
            <div class="col-lg-4">
                <div class="card shadow-sm h-100">
                    <div class="card-body">
                        <h2 class="h5 mb-4">Settings</h2>
                        <form class="orientation-form">
                            <div class="orientation-field">
                                <label for="bldOrientationToggle" class="form-label">BLD orientation:</label>
                                <input type="hidden" id="bldOrientation">
                                <div class="orientation-dropdown">
                                    <button type="button" class="btn btn-outline-secondary orientation-dropdown-toggle" id="bldOrientationToggle" aria-haspopup="listbox" aria-expanded="false">
                                        <span class="orientation-dropdown-label">Select orientation</span>
                                        <i class="bi bi-chevron-down orientation-dropdown-caret"></i>
                                    </button>
                                    <ul class="orientation-dropdown-menu" id="bldOrientationMenu" role="listbox"></ul>
                                </div>
                            </div>
                            <div class="orientation-field">
                                <label for="scramblingOrientationToggle" class="form-label">Scrambling orientation:</label>
                                <input type="hidden" id="scramblingOrientation">
                                <div class="orientation-dropdown">
                                    <button type="button" class="btn btn-outline-secondary orientation-dropdown-toggle" id="scramblingOrientationToggle" aria-haspopup="listbox" aria-expanded="false">
                                        <span class="orientation-dropdown-label">Select orientation</span>
                                        <i class="bi bi-chevron-down orientation-dropdown-caret"></i>
                                    </button>
                                    <ul class="orientation-dropdown-menu" id="scramblingOrientationMenu" role="listbox"></ul>
                                </div>
                            </div>
                            <div class="orientation-actions">
                                <button type="button" class="btn btn-primary" id="myBtn">Enter Scrambles</button>
                                <button type="button" class="btn btn-primary" id="clearCubeButton" onclick="resetCubeDisplay()">Clear Cube</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="card shadow-sm h-100">
                    <div class="card-body">
                        <div class="canvas-wrapper">
                            <canvas id="drawCanvas" width="1200" height="800"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card shadow-sm mt-4">
            <div class="card-header">
                <h2 class="h5 mb-0">Matching Scrambles</h2>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table id="matchingScrambles" class="table table-hover align-middle mb-0">
                        <tbody>
                            <!-- Rows will be dynamically added here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="scrambleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="scrambleModalLabel">Enter Scrambles</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="mb-3">Paste scrambles below (one per line):</p>
                    <textarea id="multiLineInput" class="form-control" rows="10"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="submitBtn">Submit</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="howToModal" tabindex="-1" aria-labelledby="howToModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="howToModalLabel">How to use</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    MBLD Scramble Finder is a tool for finding the scramble for any cube from a multi blind attempt in order to analyze DNFs.
                    <br><br>
                    
                    <ol class="ps-3">
                        
                        <li>Select your BLD solving orientation and the orientation the cubes were scrambled in (white/green for official WCA competition attempts).</li>
                        <li>Click the "Enter Scrambles" button and enter a list of scrambles, one on each line. These support the prefixes in csTimer's ScrambleGenerator: "1.", "1)" and "(1)".</li>
                        <li>Click the center sticker of the cube to set the drawing color, click outside of the cube to reset the color to grey. The currently selected color will appear in the bottom right square.</li>
                        <li>Click on a non-center sticker to color it in the drawing color. To reset the cube, click the "Clear Cube" button.</li>
                        <li>All scrambles that match the current pattern will show in the "Matching Scrambles" list. Click on any of the scrambles to display it on the cube.</li>
                    </ol>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Got it</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="cube.js"></script>
    <!-- <script src="solve.js"></script> -->
    <!-- <script src="comms.js"></script> -->
    <!-- <script src="alg_jison.js"></script>
    <script src="alg.js"></script> -->
    <script src="colors.js"></script>
    <!-- <script src="bldAlgs.js"></script> -->
    <!-- <script src="mbldCube.js"></script> -->
    <script src="drawCanvas.js"></script>
    <!-- <script src="gen.js"></script> -->
    <!-- <script src="letterScheme.js"></script> -->
    <script src="theme.js"></script>
    <script src="main.js"></script>
</body>
</html>
